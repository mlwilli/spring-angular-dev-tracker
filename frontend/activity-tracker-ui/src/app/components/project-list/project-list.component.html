<div class="grid grid-cols-2" style="align-items: flex-start;">
  <div>
    <div class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Projects</div>
          <div class="card-subtitle">Filter and manage projects.</div>
        </div>

        <select [(ngModel)]="filterStatus" (change)="loadProjects()">
          <option value="ALL">All statuses</option>
          <option value="PLANNED">Planned</option>
          <option value="IN_PROGRESS">In progress</option>
          <option value="ON_HOLD">On hold</option>
          <option value="COMPLETED">Completed</option>
          <option value="CANCELLED">Cancelled</option>
        </select>
      </div>
    </div>

    <div *ngIf="loading" class="card">
      Loading projects...
    </div>

    <div *ngFor="let project of projects" class="card">
      <div class="card-header">
        <div>
          <div class="card-title">
            {{ project.name }}
          </div>
          <div class="card-subtitle">
            {{ project.description || 'No description.' }}
          </div>
        </div>
        <div style="text-align:right;">
          <span [class]="statusClass(project.status)">
            {{ project.status }}
          </span>
          <div style="margin-top:0.4rem;">
            <button class="button button-secondary" (click)="selectProject(project)">
              View
            </button>
            <button class="button button-danger" (click)="deleteProject(project)">
              Delete
            </button>
          </div>
        </div>
      </div>
      <div style="font-size:0.8rem; color:#6b7280; margin-top:0.3rem;">
        Updated: {{ project.updatedAt | date:'short' }}
      </div>
    </div>
  </div>

  <div>
    <app-project-form (created)="onCreated()" (updated)="onUpdated()" [project]="selectedProject"></app-project-form>

    <app-activity-list *ngIf="selectedProject"
                       [project]="selectedProject"></app-activity-list>
  </div>
</div>
